# lec4 Web持续集成、部署与性能优化

## 持续集成——github  action

```yaml
# 任务名
name: Node.js CI
# 触发条件
on:
  push:
    branches: ['main']
  pull_request:
    branches: ['main']
# 工作
jobs:
  build:
    # 运行环境
    runs-on: ubuntu-latest
      strategy:
        matrix:
          node-version: [20.x]
		steps:
		- uses: actions/checkout@
```

## 软件构建与部署

### 构建

- 将原文件编译为可执行文件

- npm install -> npm run build ->nom prune --omit=dev

  安装依赖 -> 运行构建脚本 -> 删除开发依赖，只保留生产环境需要的依赖，减少体积和安全风险

### 部署

- 服务端构建运行环境
- 工具
  - pm2
    - 管理node.js进程
    - 自动重启/运行诊断/资源限制
  - pkg
    - 将node.js打包成独立的可执行文件
    - 部署简洁/跨平台/无需环境/平台依赖（可执行文件需要特定操作系统和硬件平台）/全量更新（资源更新后，必须全部重新打包）
  - docker
    - 通过将环境和依赖构建镜像，再创建实例，实现操作环境和依赖的隔离
    - 环境隔离/轻量/可移植/版本控制/可复现/便于扩展/资源消耗/维护复杂

- 一体化部署 HTML Server + CDN + Web Serve

### 案例

一个有时间显示、有数据展示的 Web 界面，如果它响应用户的界面点击操作存在较大的延迟，结合本门课程中提到的Web应用相关的技术基础，分析一下，可能是由哪些原因造成的？

- My Answer

```bash
时间显示说明涉及到前后端实时通讯，如websocket，这些通信可能存在时间的延迟，受到网络影响
数据展示，数据来源一般是前端与后端的交互，后端获取数据库资源传给前端，在资源较多的情况下，可能存在延迟现象
前端的渲染问题，大量数据展示，对前端渲染功能可能造成影响，性能不足产生延迟
点击操作是对组件注册的事件处理函数，这些函数为异步的操作，可能受到影响，存在延迟
```